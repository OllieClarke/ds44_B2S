
version: 2

models:
  - name: stg_stripe__payment
    description: "staging layer of stripe payment information"
    columns:
      - name: payment_id
        data_type: number
        description: "Primary key. Unique identifier of each payment"
        data_tests:
          - unique
          - not_null

      - name: order_id
        data_type: number
        description: "Foreign key, linked to jaffle shop orders data"
        data_tests:
          - relationships:
              arguments:
                field: order_id
                to: ref('stg_jaffle_shop__orders')

      - name: payment_method
        data_type: varchar
        description: "The way in which the customer paid"
        data_tests:
          - accepted_values:
              arguments:
                values:
                  - credit_card
                  - bank_transfer
                  - gift_card
                  - coupon

      - name: payment_status
        data_type: varchar
        description: "Whether the payment was a success or failed"
        data_tests:
          - accepted_values:
              arguments:
                values:
                  - success
                  - fail

      - name: amount
        data_type: number
        description: "Payment amount in dollars"
        data_tests:
          - not_null
          - no_negative_values

      - name: created
        data_type: date
        description: "When the payment was created"
        data_tests:
          - not_null
